<!DOCTYPE html>
<html lang="en">
	<head>
		<title>New Tab</title>
		<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<meta name="theme-color" content="#317EFB"/>
		<link rel="icon" type="image/svg" href="/icons/logos/icon.ico" />
		<link rel="manifest" href="/manifest.json">
		<style>

			html, body, #container {
				height: 100%;
				width: 100%;
				max-height: 100%;
				max-width: 100%;
				font-family: arial, helvetica, sans-serif;
				margin: 0;
				padding: 0;
				font-size: 1em;
				font-weight: 300;
				box-sizing: border-box;
				overflow: hidden;
			}
		</style>
	</head>

	<body>
		<image-container>This page requires JavaScript</image-container>
	</body>
	<script src="/polyfills/webcomponents-lite.min.js"></script>
	<script>
		const supportsCustomElementsV1 = 'customElements' in window;
		function loadScript(src) {
			return new Promise(function(resolve, reject) {
				const script = document.createElement('script');
				script.src = src;
				script.onload = resolve;
				script.onerror = reject;
				document.head.appendChild(script);
			});
		}

		function loadElements() {
			loadScript('components/weather/weather.js');
			loadScript('components/datetime/datetime.js');
			loadScript('components/image/image.js');
			loadScript('components/image-container/image-container.js');
		}

		// Lazy load the polyfill if necessary.
		if (!supportsCustomElementsV1) {
			loadScript('/polyfills/custom-elements.js').then(e => {
				loadElements();
			});
		} else {
			loadElements();
		}
	</script>

	<script>
		if ('serviceWorker' in navigator) {
			window.addEventListener('load', function() {
				navigator.serviceWorker.register('/sw.js')
					.then(function(registration) {
  						// Registration was successful
  						console.log('ServiceWorker registration successful with scope: ', registration.scope);
					}, function(err) {
  						// registration failed :(
  						console.log('ServiceWorker registration failed: ', err);
					});
			});
		}
	</script>
</html>
